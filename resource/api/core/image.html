
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="X-UA-Compatible" content="IE=Edge" />
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <title>core.image Module &#8212; scikit-beam 0.0.14 documentation</title>
    <link rel="stylesheet" href="../../../_static/alabaster.css" type="text/css" />
    <link rel="stylesheet" href="../../../_static/pygments.css" type="text/css" />
    <script type="text/javascript" id="documentation_options" data-url_root="../../../" src="../../../_static/documentation_options.js"></script>
    <script type="text/javascript" src="../../../_static/jquery.js"></script>
    <script type="text/javascript" src="../../../_static/underscore.js"></script>
    <script type="text/javascript" src="../../../_static/doctools.js"></script>
    <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
    <link rel="index" title="Index" href="../../../genindex.html" />
    <link rel="search" title="Search" href="../../../search.html" />
    <link rel="next" title="core.recip Module" href="recip.html" />
    <link rel="prev" title="models Module" href="fitting/xrf_model.html" />
   
  <link rel="stylesheet" href="../../../_static/custom.css" type="text/css" />
  
  
  <meta name="viewport" content="width=device-width, initial-scale=0.9, maximum-scale=0.9" />

  </head><body>
  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          

          <div class="body" role="main">
            
  <div class="section" id="module-skbeam.core.image">
<span id="core-image-module"></span><h1><code class="xref py py-mod docutils literal notranslate"><span class="pre">core.image</span></code> Module<a class="headerlink" href="#module-skbeam.core.image" title="Permalink to this headline">¶</a></h1>
<p>This is the module for putting advanced/x-ray specific image
processing tools.  These should be interesting compositions of existing
tools, not just straight wrapping of np/scipy/scikit images.</p>
<dl class="function">
<dt id="skbeam.core.image.construct_circ_avg_image">
<code class="descclassname">skbeam.core.image.</code><code class="descname">construct_circ_avg_image</code><span class="sig-paren">(</span><em>radii</em>, <em>intensities</em>, <em>dims=None</em>, <em>center=None</em>, <em>pixel_size=(1</em>, <em>1)</em>, <em>left=0</em>, <em>right=0</em><span class="sig-paren">)</span><a class="headerlink" href="#skbeam.core.image.construct_circ_avg_image" title="Permalink to this definition">¶</a></dt>
<dd><dl class="docutils">
<dt>Constructs a 2D image from circular averaged data</dt>
<dd>where radii are given in units of pixels.
Normally, data will be taken from circular_average and used to
re-interpolate into an image.</dd>
</dl>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><dl class="first docutils">
<dt><strong>radii</strong> <span class="classifier-delimiter">:</span> <span class="classifier">1D array of floats</span></dt>
<dd><p class="first last">the radii (must be in pixels)</p>
</dd>
<dt><strong>intensities</strong> <span class="classifier-delimiter">:</span> <span class="classifier">1D array of floats</span></dt>
<dd><p class="first last">the intensities for the radii</p>
</dd>
<dt><strong>dims</strong> <span class="classifier-delimiter">:</span> <span class="classifier">2 tuple of floats, optional</span></dt>
<dd><p class="first last">[dy, dx] (row, col)
dy, dx are the dimensions in row,col format If the dims are not set, it
will assume the dimensions to be (2*maxr+1) where maxr is the maximum
radius. Note in the case of rectangular pixels (pixel_size not 1:1)
that the <a href="#id1"><span class="problematic" id="id2">`</span></a>maxr’ value will be different in each dimension</p>
</dd>
<dt><strong>center: 2 tuple of floats, optional</strong></dt>
<dd><p class="first last">[y0, x0] (row, col)
y0, x0 is the center (in row,col format)
if not centered, assumes center is (dims[0]-1)/2., (dims[1]-1)/2.</p>
</dd>
<dt><strong>pixel_size</strong> <span class="classifier-delimiter">:</span> <span class="classifier">tuple, optional</span></dt>
<dd><p class="first last">The size of a pixel (in a real unit, like mm).
argument order should be (pixel_height, pixel_width)
default is (1, 1)</p>
</dd>
<dt><strong>left</strong> <span class="classifier-delimiter">:</span> <span class="classifier">float, optional</span></dt>
<dd><p class="first last">pixels smaller than the minimum radius are set to this value
(set to None for the value at the minimum radius)</p>
</dd>
<dt><strong>right</strong> <span class="classifier-delimiter">:</span> <span class="classifier">float, optional</span></dt>
<dd><p class="first last">pixels larger than the maximum radius are set to this value
(set to None for the value at the maximum radius)</p>
</dd>
</dl>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><dl class="first last docutils">
<dt><strong>IMG</strong> <span class="classifier-delimiter">:</span> <span class="classifier">the interpolated circular averaged image</span></dt>
<dd></dd>
</dl>
</td>
</tr>
</tbody>
</table>
<div class="admonition seealso">
<p class="first admonition-title">See also</p>
<dl class="last docutils">
<dt><code class="xref py py-obj docutils literal notranslate"><span class="pre">circular_average</span></code></dt>
<dd>compute circular average of an image Pixels smaller than the minimum radius are set to the value at that minimum radius. Pixels larger than the maximum radius are set to zero.</dd>
<dt><code class="xref py py-obj docutils literal notranslate"><span class="pre">bin_grid</span></code></dt>
<dd>Bin and integrate an image, given the radial array of pixels Useful for nonlinear spacing (Ewald curvature)</dd>
</dl>
</div>
<p class="rubric">Notes</p>
<dl class="docutils">
<dt>Some pixels may not be filled if the dimensions chosen are too large.</dt>
<dd>Run this code again on a list of values equal to 1 to obtain a mask
(and set left=0 and right=0).</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="skbeam.core.image.construct_rphi_avg_image">
<code class="descclassname">skbeam.core.image.</code><code class="descname">construct_rphi_avg_image</code><span class="sig-paren">(</span><em>radii</em>, <em>angles</em>, <em>image</em>, <em>mask=None</em>, <em>center=None</em>, <em>shape=None</em>, <em>pixel_size=(1</em>, <em>1)</em><span class="sig-paren">)</span><a class="headerlink" href="#skbeam.core.image.construct_rphi_avg_image" title="Permalink to this definition">¶</a></dt>
<dd><p>Construct a 2D Cartesian (x,y) image from a polar coordinate image.</p>
<p>Assumes a 2D array of data. If data is missing, use mask.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><dl class="first docutils">
<dt><strong>radii</strong> <span class="classifier-delimiter">:</span> <span class="classifier">1d array of coordinates, ascending order.</span></dt>
<dd><p class="first last">The radii values (in units of pixels)
These may be non-uniformly spaced.</p>
</dd>
<dt><strong>angles</strong> <span class="classifier-delimiter">:</span> <span class="classifier">1d array of coordinates, ascending order</span></dt>
<dd><p class="first">The angle values (in units of radians)
Domain <em>must</em> be monotonically increasing (or a subset) if
we plot the reconstructed image in a typical x-y plane,
where x are the columns of the image and y are the rows
(img[y,x]), then 0 degrees is the -x direction, and
ascending angle goes clockwise in this plane.
These may be non-uniformly spaced.
Note that if the domain interval exceeds 2*pi, values
outside this range are ignored for interpolation.
Ex : angles = [0, …, 6.25, 2*np.pi]</p>
<blockquote class="last">
<div><p>The last point modulo 2*pi is 0 which is the same as first
point so it is ignored</p>
</div></blockquote>
</dd>
<dt><strong>image</strong> <span class="classifier-delimiter">:</span> <span class="classifier">2d array the image to interpolate from</span></dt>
<dd><p class="first last">rows are radii, columns are angles, ex: img[radii, angles]</p>
</dd>
<dt><strong>mask</strong> <span class="classifier-delimiter">:</span> <span class="classifier">2d array, optional</span></dt>
<dd><p class="first last">the masked data (0 masked, 1 not masked). Defaults to None,
which means assume all points are valid.</p>
</dd>
<dt><strong>center</strong> <span class="classifier-delimiter">:</span> <span class="classifier">2 tuple of floats, optional</span></dt>
<dd></dd>
<dt><strong>shape</strong> <span class="classifier-delimiter">:</span> <span class="classifier">the new image shape, in terms of pixel values</span></dt>
<dd></dd>
</dl>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><dl class="first last docutils">
<dt><strong>new_img</strong> <span class="classifier-delimiter">:</span> <span class="classifier">2d np.ndarray</span></dt>
<dd><p class="first last">The reconstructed image. Masked regions are filled with np.nan</p>
</dd>
</dl>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="skbeam.core.image.find_ring_center_acorr_1D">
<code class="descclassname">skbeam.core.image.</code><code class="descname">find_ring_center_acorr_1D</code><span class="sig-paren">(</span><em>input_image</em><span class="sig-paren">)</span><a class="headerlink" href="#skbeam.core.image.find_ring_center_acorr_1D" title="Permalink to this definition">¶</a></dt>
<dd><p>Find the pixel-resolution center of a set of concentric rings.</p>
<p>This function uses correlation between the image and it’s mirror
to find the approximate center of  a single set of concentric rings.
It is assumed that there is only one set of rings in the image.  For
this method to work well the image must have significant mirror-symmetry
in both dimensions.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><dl class="first docutils">
<dt><strong>input_image</strong> <span class="classifier-delimiter">:</span> <span class="classifier">ndarray</span></dt>
<dd><p class="first last">A single image.</p>
</dd>
</dl>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><dl class="first last docutils">
<dt><strong>calibrated_center</strong> <span class="classifier-delimiter">:</span> <span class="classifier">tuple</span></dt>
<dd><p class="first last">Returns the index (row, col) of the pixel that rings
are centered on.  Accurate to pixel resolution.</p>
</dd>
</dl>
</td>
</tr>
</tbody>
</table>
</dd></dl>

</div>


          </div>
          
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
<h1 class="logo"><a href="../../../index.html">scikit-beam</a></h1>








<h3>Navigation</h3>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../../install.html">Installation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../getting_started.html">Getting Started with Scikit-beam</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../installation.html">Installing scikit-beam</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../installation.html#updating-your-installation">Updating Your Installation</a></li>
</ul>
<ul class="current">
<li class="toctree-l1 current"><a class="reference internal" href="../index.html">Complete Reference (API)</a><ul class="current">
<li class="toctree-l2 current"><a class="reference internal" href="../index.html#core">Core</a><ul class="current">
<li class="toctree-l3 current"><a class="reference internal" href="index.html">Core API</a></li>
<li class="toctree-l3"><a class="reference internal" href="../io/index.html">IO API</a></li>
<li class="toctree-l3"><a class="reference internal" href="../core.html"><code class="docutils literal notranslate"><span class="pre">core</span></code> subpackge</a></li>
<li class="toctree-l3"><a class="reference internal" href="mask.html"><code class="docutils literal notranslate"><span class="pre">core.mask</span></code> Module</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../index.html#domain-name-spaces">Domain name spaces</a></li>
</ul>
</li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../../development/workflow/get_devel_version.html">Try the development version</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../development/workflow/development_workflow.html">How to make a code contribution</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../../overview.html">Project organization</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../development/workflow/development_workflow.html">How to make a code contribution</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../development/codeguide.html">Coding Guidelines</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../development/docguide.html">Writing Documentation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../development/testguide.html">Testing Guidelines</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../development/scripts.html">Writing Command-Line Scripts</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../development/building.html">Building Scikit-beam and its Subpackages</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../development/ccython.html">C or Cython Extensions</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../development/releasing.html">Release Procedures</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../development/workflow/maintainer_workflow.html">Workflow for Maintainers</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../development/affiliated-packages.html">How to create and maintain an Skbeam affiliated package</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../development/vision.html">Vision for a Common Python Package for x-ray, electron and neutrons</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../dev_guide/index.html">Development Guide</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../api_changes.html">API Changes</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../python_versions.html">Supported versions of Python</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../warnings.html">Python warnings system</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../../whatsnew/index.html">Major Release History</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../whats_new.html">What’s new</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../known_issues.html">Known Issues</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../examples/index.html">Example gallery</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../introduction.html">Introduction to scikit-beam</a></li>
</ul>

<div class="relations">
<h3>Related Topics</h3>
<ul>
  <li><a href="../../../index.html">Documentation overview</a><ul>
  <li><a href="../index.html">Complete Reference (API)</a><ul>
  <li><a href="index.html">Core API</a><ul>
      <li>Previous: <a href="fitting/xrf_model.html" title="previous chapter"><code class="docutils literal notranslate"><span class="pre">models</span></code> Module</a></li>
      <li>Next: <a href="recip.html" title="next chapter"><code class="docutils literal notranslate"><span class="pre">core.recip</span></code> Module</a></li>
  </ul></li>
  </ul></li>
  </ul></li>
</ul>
</div>
<div id="searchbox" style="display: none" role="search">
  <h3>Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="../../../search.html" method="get">
      <input type="text" name="q" />
      <input type="submit" value="Go" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
    </div>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="footer">
      &copy;2014-2015 Brookhaven National Lab.
      
      |
      Powered by <a href="http://sphinx-doc.org/">Sphinx 1.7.9</a>
      &amp; <a href="https://github.com/bitprophet/alabaster">Alabaster 0.7.11</a>
      
      |
      <a href="../../../_sources/resource/api/core/image.rst.txt"
          rel="nofollow">Page source</a>
    </div>

    

    
  </body>
</html>