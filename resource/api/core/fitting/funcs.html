
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="X-UA-Compatible" content="IE=Edge" />
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <title>xrf_model Module &#8212; scikit-beam 0.0.14 documentation</title>
    <link rel="stylesheet" href="../../../../_static/alabaster.css" type="text/css" />
    <link rel="stylesheet" href="../../../../_static/pygments.css" type="text/css" />
    <script type="text/javascript" id="documentation_options" data-url_root="../../../../" src="../../../../_static/documentation_options.js"></script>
    <script type="text/javascript" src="../../../../_static/jquery.js"></script>
    <script type="text/javascript" src="../../../../_static/underscore.js"></script>
    <script type="text/javascript" src="../../../../_static/doctools.js"></script>
    <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
    <link rel="index" title="Index" href="../../../../genindex.html" />
    <link rel="search" title="Search" href="../../../../search.html" />
    <link rel="next" title="background Module" href="lineshapes.html" />
    <link rel="prev" title="funcs Module" href="background.html" />
   
  <link rel="stylesheet" href="../../../../_static/custom.css" type="text/css" />
  
  
  <meta name="viewport" content="width=device-width, initial-scale=0.9, maximum-scale=0.9" />

  </head><body>
  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          

          <div class="body" role="main">
            
  <div class="section" id="module-skbeam.core.fitting.xrf_model">
<span id="xrf-model-module"></span><h1><code class="xref py py-mod docutils literal notranslate"><span class="pre">xrf_model</span></code> Module<a class="headerlink" href="#module-skbeam.core.fitting.xrf_model" title="Permalink to this headline">¶</a></h1>
<dl class="class">
<dt id="skbeam.core.fitting.xrf_model.ElementModel">
<em class="property">class </em><code class="descclassname">skbeam.core.fitting.xrf_model.</code><code class="descname">ElementModel</code><span class="sig-paren">(</span><em>*args</em>, <em>**kwargs</em><span class="sig-paren">)</span><a class="headerlink" href="#skbeam.core.fitting.xrf_model.ElementModel" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">lmfit.model.Model</span></code></p>
<p>Wrap the element_peak_xrf function for fitting within lmfit framework</p>
<p>This is a function to construct xrf element peak, which is based on
gauss profile, but more specific requirements need to be
considered. For instance, the standard deviation is replaced by
global fitting parameters, and energy calibration on x is taken into
account.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><dl class="first docutils">
<dt><strong>x</strong> <span class="classifier-delimiter">:</span> <span class="classifier">array</span></dt>
<dd><p class="first last">independent variable, channel number instead of energy</p>
</dd>
<dt><strong>area</strong> <span class="classifier-delimiter">:</span> <span class="classifier">float</span></dt>
<dd><p class="first last">area of gaussian function</p>
</dd>
<dt><strong>center</strong> <span class="classifier-delimiter">:</span> <span class="classifier">float</span></dt>
<dd><p class="first last">center position</p>
</dd>
<dt><strong>delta_center</strong> <span class="classifier-delimiter">:</span> <span class="classifier">float</span></dt>
<dd><p class="first last">adjustment to center position</p>
</dd>
<dt><strong>delta_sigma</strong> <span class="classifier-delimiter">:</span> <span class="classifier">float</span></dt>
<dd><p class="first last">adjustment to standard deviation</p>
</dd>
<dt><strong>ratio</strong> <span class="classifier-delimiter">:</span> <span class="classifier">float</span></dt>
<dd><p class="first last">branching ratio</p>
</dd>
<dt><strong>ratio_adjust</strong> <span class="classifier-delimiter">:</span> <span class="classifier">float</span></dt>
<dd><p class="first last">value used to adjust peak height</p>
</dd>
<dt><strong>fwhm_offset</strong> <span class="classifier-delimiter">:</span> <span class="classifier">float</span></dt>
<dd><p class="first last">global fitting parameter for peak width</p>
</dd>
<dt><strong>fwhm_fanoprime</strong> <span class="classifier-delimiter">:</span> <span class="classifier">float</span></dt>
<dd><p class="first last">global fitting parameter for peak width</p>
</dd>
<dt><strong>e_offset</strong> <span class="classifier-delimiter">:</span> <span class="classifier">float</span></dt>
<dd><p class="first last">offset of energy calibration</p>
</dd>
<dt><strong>e_linear</strong> <span class="classifier-delimiter">:</span> <span class="classifier">float</span></dt>
<dd><p class="first last">linear coefficient in energy calibration</p>
</dd>
<dt><strong>e_quadratic</strong> <span class="classifier-delimiter">:</span> <span class="classifier">float</span></dt>
<dd><p class="first last">quadratic coefficient in energy calibration</p>
</dd>
</dl>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><dl class="first last docutils">
<dt><strong>array:</strong></dt>
<dd><p class="first last">gaussian peak profile</p>
</dd>
</dl>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="class">
<dt id="skbeam.core.fitting.xrf_model.ModelSpectrum">
<em class="property">class </em><code class="descclassname">skbeam.core.fitting.xrf_model.</code><code class="descname">ModelSpectrum</code><span class="sig-paren">(</span><em>params</em>, <em>elemental_lines</em><span class="sig-paren">)</span><a class="headerlink" href="#skbeam.core.fitting.xrf_model.ModelSpectrum" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference external" href="https://docs.python.org/3.5/library/functions.html#object" title="(in Python v3.5)"><code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></a></p>
<p>Construct Fluorescence spectrum which includes elastic peak,
compton and element peaks.</p>
<dl class="method">
<dt id="skbeam.core.fitting.xrf_model.ModelSpectrum.assemble_models">
<code class="descname">assemble_models</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#skbeam.core.fitting.xrf_model.ModelSpectrum.assemble_models" title="Permalink to this definition">¶</a></dt>
<dd><p>Put all models together to form a spectrum.</p>
</dd></dl>

<dl class="method">
<dt id="skbeam.core.fitting.xrf_model.ModelSpectrum.model_fit">
<code class="descname">model_fit</code><span class="sig-paren">(</span><em>channel_number</em>, <em>spectrum</em>, <em>weights=None</em>, <em>method='leastsq'</em>, <em>**kwargs</em><span class="sig-paren">)</span><a class="headerlink" href="#skbeam.core.fitting.xrf_model.ModelSpectrum.model_fit" title="Permalink to this definition">¶</a></dt>
<dd><table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><dl class="first docutils">
<dt><strong>channel_number</strong> <span class="classifier-delimiter">:</span> <span class="classifier">array</span></dt>
<dd><p class="first last">independent variable</p>
</dd>
<dt><strong>spectrum</strong> <span class="classifier-delimiter">:</span> <span class="classifier">array</span></dt>
<dd><p class="first last">intensity</p>
</dd>
<dt><strong>weights</strong> <span class="classifier-delimiter">:</span> <span class="classifier">array, optional</span></dt>
<dd><p class="first last">weight for fitting</p>
</dd>
<dt><strong>method</strong> <span class="classifier-delimiter">:</span> <span class="classifier">str</span></dt>
<dd><p class="first last">default as leastsq</p>
</dd>
<dt><strong>kwargs</strong> <span class="classifier-delimiter">:</span> <span class="classifier">dict</span></dt>
<dd><p class="first last">fitting criteria, such as max number of iteration</p>
</dd>
</dl>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><dl class="first last docutils">
<dt><strong>result object from lmfit</strong></dt>
<dd></dd>
</dl>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="skbeam.core.fitting.xrf_model.ModelSpectrum.setup_compton_model">
<code class="descname">setup_compton_model</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#skbeam.core.fitting.xrf_model.ModelSpectrum.setup_compton_model" title="Permalink to this definition">¶</a></dt>
<dd><p>setup parameters related to Compton model</p>
</dd></dl>

<dl class="method">
<dt id="skbeam.core.fitting.xrf_model.ModelSpectrum.setup_elastic_model">
<code class="descname">setup_elastic_model</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#skbeam.core.fitting.xrf_model.ModelSpectrum.setup_elastic_model" title="Permalink to this definition">¶</a></dt>
<dd><p>setup parameters related to Elastic model</p>
</dd></dl>

<dl class="method">
<dt id="skbeam.core.fitting.xrf_model.ModelSpectrum.setup_element_model">
<code class="descname">setup_element_model</code><span class="sig-paren">(</span><em>elemental_line</em>, <em>default_area=100000.0</em><span class="sig-paren">)</span><a class="headerlink" href="#skbeam.core.fitting.xrf_model.ModelSpectrum.setup_element_model" title="Permalink to this definition">¶</a></dt>
<dd><p>Construct element model. Elemental line that can be add include elemental
peak, pileup peak and user peak. User peak is a fake peak, but can be used
as a quick replacement for pileup peaks, escape peaks or other unknown peaks
due to detector defects or scattering process.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><dl class="first last docutils">
<dt><strong>elemental_line</strong> <span class="classifier-delimiter">:</span> <span class="classifier">str</span></dt>
<dd><p class="first last">elemental line, such as ‘Fe_K’
pileup peak, such as ‘Si_Ka1-Si_Ka1’
user peak, such as ‘user_peak1’, ‘user_peak2’</p>
</dd>
<dt><strong>default_area</strong> <span class="classifier-delimiter">:</span> <span class="classifier">float, optional</span></dt>
<dd><p class="first last">value for the initial area of a given element
default is 1e5, found to be a good value</p>
</dd>
</dl>
</td>
</tr>
</tbody>
</table>
</dd></dl>

</dd></dl>

<dl class="class">
<dt id="skbeam.core.fitting.xrf_model.ParamController">
<em class="property">class </em><code class="descclassname">skbeam.core.fitting.xrf_model.</code><code class="descname">ParamController</code><span class="sig-paren">(</span><em>params</em>, <em>elemental_lines</em><span class="sig-paren">)</span><a class="headerlink" href="#skbeam.core.fitting.xrf_model.ParamController" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference external" href="https://docs.python.org/3.5/library/functions.html#object" title="(in Python v3.5)"><code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></a></p>
<p>Update element peak information in parameter dictionary.
This is an important step in dynamical fitting.</p>
<dl class="method">
<dt id="skbeam.core.fitting.xrf_model.ParamController.add_param">
<code class="descname">add_param</code><span class="sig-paren">(</span><em>kind</em>, <em>element</em>, <em>constraint=None</em><span class="sig-paren">)</span><a class="headerlink" href="#skbeam.core.fitting.xrf_model.ParamController.add_param" title="Permalink to this definition">¶</a></dt>
<dd><p>Create a Parameter controlling peak position, width,
branching ratio, or area.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><dl class="first last docutils">
<dt><strong>kind</strong> <span class="classifier-delimiter">:</span> <span class="classifier">{‘pos’, ‘width’, ‘ratio’, ‘area’}</span></dt>
<dd></dd>
<dt><strong>element</strong> <span class="classifier-delimiter">:</span> <span class="classifier">str</span></dt>
<dd><p class="first last">element name</p>
</dd>
<dt><strong>constraint</strong> <span class="classifier-delimiter">:</span> <span class="classifier">{‘lo’, ‘hi’, ‘lohi’, ‘fixed’, ‘none’}, optional</span></dt>
<dd><p class="first last">default “bound strategy” (fitting constraints)</p>
</dd>
<dt><strong>.. note:: Element that can be add include elemental peak, pileup peak and user peak.</strong></dt>
<dd></dd>
<dt><strong>User peak is a fake peak, but can be used as a quick replacement for pileup peaks,</strong></dt>
<dd></dd>
<dt><strong>escape peaks or other unknown peaks due to detector defects or scattering process.</strong></dt>
<dd></dd>
</dl>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="skbeam.core.fitting.xrf_model.ParamController.set_strategy">
<code class="descname">set_strategy</code><span class="sig-paren">(</span><em>strategy_name</em><span class="sig-paren">)</span><a class="headerlink" href="#skbeam.core.fitting.xrf_model.ParamController.set_strategy" title="Permalink to this definition">¶</a></dt>
<dd><p>Update the default value of bounds.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><dl class="first last docutils">
<dt><strong>strategy_name</strong> <span class="classifier-delimiter">:</span> <span class="classifier">str</span></dt>
<dd><p class="first last">fitting strategy that this Model will use</p>
</dd>
</dl>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="skbeam.core.fitting.xrf_model.ParamController.update_element_prop">
<code class="descname">update_element_prop</code><span class="sig-paren">(</span><em>element_list</em>, <em>**kwargs</em><span class="sig-paren">)</span><a class="headerlink" href="#skbeam.core.fitting.xrf_model.ParamController.update_element_prop" title="Permalink to this definition">¶</a></dt>
<dd><p>Update element properties, such as pos, width, area and ratio.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><dl class="first docutils">
<dt><strong>element_list</strong> <span class="classifier-delimiter">:</span> <span class="classifier">list</span></dt>
<dd><p class="first last">define which element to update</p>
</dd>
<dt><strong>kwargs</strong> <span class="classifier-delimiter">:</span> <span class="classifier">dict</span></dt>
<dd><p class="first last">define what kind of property to change</p>
</dd>
</dl>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><dl class="first last docutils">
<dt><strong>dict</strong> <span class="classifier-delimiter">:</span> <span class="classifier">updated value</span></dt>
<dd></dd>
</dl>
</td>
</tr>
</tbody>
</table>
</dd></dl>

</dd></dl>

<dl class="function">
<dt id="skbeam.core.fitting.xrf_model.calculate_area">
<code class="descclassname">skbeam.core.fitting.xrf_model.</code><code class="descname">calculate_area</code><span class="sig-paren">(</span><em>e_select</em>, <em>matv</em>, <em>results</em>, <em>param</em>, <em>first_peak_area=False</em><span class="sig-paren">)</span><a class="headerlink" href="#skbeam.core.fitting.xrf_model.calculate_area" title="Permalink to this definition">¶</a></dt>
<dd><table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><dl class="first docutils">
<dt><strong>e_select</strong> <span class="classifier-delimiter">:</span> <span class="classifier">list</span></dt>
<dd><p class="first last">elements</p>
</dd>
<dt><strong>matv</strong> <span class="classifier-delimiter">:</span> <span class="classifier">2D array</span></dt>
<dd><p class="first last">matrix constains elemental profile as columns</p>
</dd>
<dt><strong>results</strong> <span class="classifier-delimiter">:</span> <span class="classifier">3D array</span></dt>
<dd><p class="first last">x, y positions, and each element’s weight on third dim</p>
</dd>
<dt><strong>param</strong> <span class="classifier-delimiter">:</span> <span class="classifier">dict</span></dt>
<dd><p class="first last">parameters of fitting</p>
</dd>
<dt><strong>first_peak_area</strong> <span class="classifier-delimiter">:</span> <span class="classifier">Bool, optional</span></dt>
<dd><p class="first last">get overal peak area or only the first peak area, such as Ar_Ka1</p>
</dd>
</dl>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><dl class="first last docutils">
<dt><strong>dict :</strong></dt>
<dd><p class="first last">dict of each 2D elemental distribution</p>
</dd>
</dl>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="skbeam.core.fitting.xrf_model.compute_escape_peak">
<code class="descclassname">skbeam.core.fitting.xrf_model.</code><code class="descname">compute_escape_peak</code><span class="sig-paren">(</span><em>spectrum</em>, <em>ratio</em>, <em>params</em>, <em>escape_e=1.73998</em><span class="sig-paren">)</span><a class="headerlink" href="#skbeam.core.fitting.xrf_model.compute_escape_peak" title="Permalink to this definition">¶</a></dt>
<dd><p>Calculate the escape peak for given detector.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><dl class="first docutils">
<dt><strong>spectrum</strong> <span class="classifier-delimiter">:</span> <span class="classifier">array</span></dt>
<dd><p class="first last">original, uncorrected spectrum</p>
</dd>
<dt><strong>ratio</strong> <span class="classifier-delimiter">:</span> <span class="classifier">float</span></dt>
<dd><p class="first last">ratio of shadow to full spectrum</p>
</dd>
<dt><strong>param</strong> <span class="classifier-delimiter">:</span> <span class="classifier">dict</span></dt>
<dd><p class="first last">fitting parameters</p>
</dd>
<dt><strong>escape_e</strong> <span class="classifier-delimiter">:</span> <span class="classifier">float</span></dt>
<dd><p class="first last">Units: keV
By default, 1.73998 (Ka1 line of Si)</p>
</dd>
</dl>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><dl class="first last docutils">
<dt><strong>array:</strong></dt>
<dd><p class="first last">x after shift, and adjusted y</p>
</dd>
</dl>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="skbeam.core.fitting.xrf_model.construct_linear_model">
<code class="descclassname">skbeam.core.fitting.xrf_model.</code><code class="descname">construct_linear_model</code><span class="sig-paren">(</span><em>channel_number</em>, <em>params</em>, <em>elemental_lines</em>, <em>default_area=100</em><span class="sig-paren">)</span><a class="headerlink" href="#skbeam.core.fitting.xrf_model.construct_linear_model" title="Permalink to this definition">¶</a></dt>
<dd><p>Create spectrum with parameters given from params.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><dl class="first docutils">
<dt><strong>channel_number</strong> <span class="classifier-delimiter">:</span> <span class="classifier">array</span></dt>
<dd><p class="first last">N.B. This is the raw independent variable, not energy.</p>
</dd>
<dt><strong>params</strong> <span class="classifier-delimiter">:</span> <span class="classifier">dict</span></dt>
<dd><p class="first last">fitting parameters</p>
</dd>
<dt><strong>elemental_lines</strong> <span class="classifier-delimiter">:</span> <span class="classifier">list</span></dt>
<dd><p class="first last">e.g., [‘Na_K’, Mg_K’, ‘Pt_M’] refers to the
K lines of Sodium, the K lines of Magnesium, and the M
lines of Platinum</p>
</dd>
<dt><strong>default_area</strong> <span class="classifier-delimiter">:</span> <span class="classifier">float</span></dt>
<dd><p class="first last">value for the initial area of a given element</p>
</dd>
</dl>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><dl class="first last docutils">
<dt><strong>selected_elements</strong> <span class="classifier-delimiter">:</span> <span class="classifier">list</span></dt>
<dd><p class="first last">selected elements for given energy</p>
</dd>
<dt><strong>matv</strong> <span class="classifier-delimiter">:</span> <span class="classifier">array</span></dt>
<dd><p class="first last">matrix for linear fitting</p>
</dd>
<dt><strong>element_area</strong> <span class="classifier-delimiter">:</span> <span class="classifier">dict</span></dt>
<dd><p class="first last">area of the given elements</p>
</dd>
</dl>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="skbeam.core.fitting.xrf_model.define_range">
<code class="descclassname">skbeam.core.fitting.xrf_model.</code><code class="descname">define_range</code><span class="sig-paren">(</span><em>data</em>, <em>low</em>, <em>high</em>, <em>a0</em>, <em>a1</em><span class="sig-paren">)</span><a class="headerlink" href="#skbeam.core.fitting.xrf_model.define_range" title="Permalink to this definition">¶</a></dt>
<dd><p>Cut x range based on offset and linear term of a linear function.
a0 and a1 should be defined in param_dict.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><dl class="first docutils">
<dt><strong>data</strong> <span class="classifier-delimiter">:</span> <span class="classifier">1D array</span></dt>
<dd><p class="first last">raw spectrum</p>
</dd>
<dt><strong>low</strong> <span class="classifier-delimiter">:</span> <span class="classifier">float</span></dt>
<dd><p class="first last">low bound in KeV</p>
</dd>
<dt><strong>high</strong> <span class="classifier-delimiter">:</span> <span class="classifier">float</span></dt>
<dd><p class="first last">high bound in KeV</p>
</dd>
<dt><strong>a0</strong> <span class="classifier-delimiter">:</span> <span class="classifier">float</span></dt>
<dd><p class="first last">offset term of energy calibration</p>
</dd>
<dt><strong>a1</strong> <span class="classifier-delimiter">:</span> <span class="classifier">float</span></dt>
<dd><p class="first last">linear term of energy calibration</p>
</dd>
</dl>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><dl class="first last docutils">
<dt><strong>x</strong> <span class="classifier-delimiter">:</span> <span class="classifier">array</span></dt>
<dd><p class="first last">trimmed channel number</p>
</dd>
<dt><strong>y</strong> <span class="classifier-delimiter">:</span> <span class="classifier">array</span></dt>
<dd><p class="first last">trimmed spectrum according to x</p>
</dd>
</dl>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="skbeam.core.fitting.xrf_model.element_peak_xrf">
<code class="descclassname">skbeam.core.fitting.xrf_model.</code><code class="descname">element_peak_xrf</code><span class="sig-paren">(</span><em>x</em>, <em>area</em>, <em>center</em>, <em>delta_center</em>, <em>delta_sigma</em>, <em>ratio</em>, <em>ratio_adjust</em>, <em>fwhm_offset</em>, <em>fwhm_fanoprime</em>, <em>e_offset</em>, <em>e_linear</em>, <em>e_quadratic</em>, <em>epsilon=2.96</em><span class="sig-paren">)</span><a class="headerlink" href="#skbeam.core.fitting.xrf_model.element_peak_xrf" title="Permalink to this definition">¶</a></dt>
<dd><p>This is a function to construct xrf element peak, which is based on
gauss profile, but more specific requirements need to be
considered. For instance, the standard deviation is replaced by
global fitting parameters, and energy calibration on x is taken into
account.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><dl class="first docutils">
<dt><strong>x</strong> <span class="classifier-delimiter">:</span> <span class="classifier">array</span></dt>
<dd><p class="first last">independent variable, channel number instead of energy</p>
</dd>
<dt><strong>area</strong> <span class="classifier-delimiter">:</span> <span class="classifier">float</span></dt>
<dd><p class="first last">area of gaussian function</p>
</dd>
<dt><strong>center</strong> <span class="classifier-delimiter">:</span> <span class="classifier">float</span></dt>
<dd><p class="first last">center position</p>
</dd>
<dt><strong>delta_center</strong> <span class="classifier-delimiter">:</span> <span class="classifier">float</span></dt>
<dd><p class="first last">adjustment to center position</p>
</dd>
<dt><strong>delta_sigma</strong> <span class="classifier-delimiter">:</span> <span class="classifier">float</span></dt>
<dd><p class="first last">adjustment to standard deviation</p>
</dd>
<dt><strong>ratio</strong> <span class="classifier-delimiter">:</span> <span class="classifier">float</span></dt>
<dd><p class="first last">branching ratio</p>
</dd>
<dt><strong>ratio_adjust</strong> <span class="classifier-delimiter">:</span> <span class="classifier">float</span></dt>
<dd><p class="first last">value used to adjust peak height</p>
</dd>
<dt><strong>fwhm_offset</strong> <span class="classifier-delimiter">:</span> <span class="classifier">float</span></dt>
<dd><p class="first last">global fitting parameter for peak width</p>
</dd>
<dt><strong>fwhm_fanoprime</strong> <span class="classifier-delimiter">:</span> <span class="classifier">float</span></dt>
<dd><p class="first last">global fitting parameter for peak width</p>
</dd>
<dt><strong>e_offset</strong> <span class="classifier-delimiter">:</span> <span class="classifier">float</span></dt>
<dd><p class="first last">offset of energy calibration</p>
</dd>
<dt><strong>e_linear</strong> <span class="classifier-delimiter">:</span> <span class="classifier">float</span></dt>
<dd><p class="first last">linear coefficient in energy calibration</p>
</dd>
<dt><strong>e_quadratic</strong> <span class="classifier-delimiter">:</span> <span class="classifier">float</span></dt>
<dd><p class="first last">quadratic coefficient in energy calibration</p>
</dd>
</dl>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><dl class="first last docutils">
<dt><strong>array:</strong></dt>
<dd><p class="first last">gaussian peak profile</p>
</dd>
</dl>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="skbeam.core.fitting.xrf_model.extract_strategy">
<code class="descclassname">skbeam.core.fitting.xrf_model.</code><code class="descname">extract_strategy</code><span class="sig-paren">(</span><em>param</em>, <em>name</em><span class="sig-paren">)</span><a class="headerlink" href="#skbeam.core.fitting.xrf_model.extract_strategy" title="Permalink to this definition">¶</a></dt>
<dd><p>Extract given strategy from param dict.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><dl class="first docutils">
<dt><strong>param</strong> <span class="classifier-delimiter">:</span> <span class="classifier">dict</span></dt>
<dd><p class="first last">saving all parameters for data fitting</p>
</dd>
<dt><strong>name</strong> <span class="classifier-delimiter">:</span> <span class="classifier">str</span></dt>
<dd><p class="first last">strategy name</p>
</dd>
</dl>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><dl class="first last docutils">
<dt><strong>dict :</strong></dt>
<dd><p class="first last">with given strategy as value</p>
</dd>
</dl>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="skbeam.core.fitting.xrf_model.fit_per_line_nnls">
<code class="descclassname">skbeam.core.fitting.xrf_model.</code><code class="descname">fit_per_line_nnls</code><span class="sig-paren">(</span><em>data</em>, <em>matv</em>, <em>param</em>, <em>use_snip</em><span class="sig-paren">)</span><a class="headerlink" href="#skbeam.core.fitting.xrf_model.fit_per_line_nnls" title="Permalink to this definition">¶</a></dt>
<dd><p>Fit experiment data for a given row using nnls algorithm.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><dl class="first docutils">
<dt><strong>data</strong> <span class="classifier-delimiter">:</span> <span class="classifier">array</span></dt>
<dd><p class="first last">selected one row of experiment spectrum</p>
</dd>
<dt><strong>matv</strong> <span class="classifier-delimiter">:</span> <span class="classifier">array</span></dt>
<dd><p class="first last">matrix for regression analysis</p>
</dd>
<dt><strong>param</strong> <span class="classifier-delimiter">:</span> <span class="classifier">dict</span></dt>
<dd><p class="first last">fitting parameters</p>
</dd>
<dt><strong>use_snip</strong> <span class="classifier-delimiter">:</span> <span class="classifier">bool</span></dt>
<dd><p class="first last">use snip algorithm to remove background or not</p>
</dd>
</dl>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><dl class="first last docutils">
<dt><strong>array :</strong></dt>
<dd><p class="first last">fitting values for all the elements at a given row. Background is
calculated as a summed value. Also residual is included.</p>
</dd>
</dl>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="skbeam.core.fitting.xrf_model.fit_pixel_multiprocess_nnls">
<code class="descclassname">skbeam.core.fitting.xrf_model.</code><code class="descname">fit_pixel_multiprocess_nnls</code><span class="sig-paren">(</span><em>exp_data</em>, <em>matv</em>, <em>param</em>, <em>use_snip=False</em><span class="sig-paren">)</span><a class="headerlink" href="#skbeam.core.fitting.xrf_model.fit_pixel_multiprocess_nnls" title="Permalink to this definition">¶</a></dt>
<dd><p>Multiprocess fit of experiment data.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><dl class="first docutils">
<dt><strong>exp_data</strong> <span class="classifier-delimiter">:</span> <span class="classifier">array</span></dt>
<dd><p class="first last">3D data of experiment spectrum,
with x,y positions as the first 2-dim, and energy as the third one.</p>
</dd>
<dt><strong>matv</strong> <span class="classifier-delimiter">:</span> <span class="classifier">array</span></dt>
<dd><p class="first last">matrix for regression analysis</p>
</dd>
<dt><strong>param</strong> <span class="classifier-delimiter">:</span> <span class="classifier">dict</span></dt>
<dd><p class="first last">fitting parameters</p>
</dd>
<dt><strong>use_snip</strong> <span class="classifier-delimiter">:</span> <span class="classifier">bool, optional</span></dt>
<dd><p class="first last">use snip algorithm to remove background or not</p>
</dd>
</dl>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><dl class="first last docutils">
<dt><strong>array</strong></dt>
<dd><p class="first last">Fitting values for all the elements</p>
</dd>
</dl>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="skbeam.core.fitting.xrf_model.get_activated_lines">
<code class="descclassname">skbeam.core.fitting.xrf_model.</code><code class="descname">get_activated_lines</code><span class="sig-paren">(</span><em>incident_energy</em>, <em>elemental_lines</em><span class="sig-paren">)</span><a class="headerlink" href="#skbeam.core.fitting.xrf_model.get_activated_lines" title="Permalink to this definition">¶</a></dt>
<dd><table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><dl class="first docutils">
<dt><strong>incident_energy</strong> <span class="classifier-delimiter">:</span> <span class="classifier">float</span></dt>
<dd><p class="first last">beam energy</p>
</dd>
<dt><strong>element_lines</strong> <span class="classifier-delimiter">:</span> <span class="classifier">list</span></dt>
<dd><p class="first last">e.g., [‘Na_K’, ‘Mg_K’, ‘Pt_M’]</p>
</dd>
</dl>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><dl class="first last docutils">
<dt><strong>list</strong></dt>
<dd><p class="first last">all activated lines for given elements</p>
</dd>
</dl>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="skbeam.core.fitting.xrf_model.get_line_energy">
<code class="descclassname">skbeam.core.fitting.xrf_model.</code><code class="descname">get_line_energy</code><span class="sig-paren">(</span><em>elemental_line</em><span class="sig-paren">)</span><a class="headerlink" href="#skbeam.core.fitting.xrf_model.get_line_energy" title="Permalink to this definition">¶</a></dt>
<dd><p>Return the energy of the first line in K, L or M series.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><dl class="first docutils">
<dt><strong>elemental_line</strong> <span class="classifier-delimiter">:</span> <span class="classifier">str</span></dt>
<dd><p class="first last">For instance, Eu_L is the format for L lines and Pt_M for M lines.
And for K lines, user needs to define lines like ka1, kb1,
because for K lines, we consider contributions from either ka1
or kb1, while for L or M lines, we only consider the primary peak.</p>
</dd>
</dl>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><dl class="first last docutils">
<dt><strong>float :</strong></dt>
<dd><p class="first last">energy of emission line</p>
</dd>
</dl>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="skbeam.core.fitting.xrf_model.get_relative_cs_ratio">
<code class="descclassname">skbeam.core.fitting.xrf_model.</code><code class="descname">get_relative_cs_ratio</code><span class="sig-paren">(</span><em>elemental_line</em>, <em>energy</em><span class="sig-paren">)</span><a class="headerlink" href="#skbeam.core.fitting.xrf_model.get_relative_cs_ratio" title="Permalink to this definition">¶</a></dt>
<dd><p>At given energy, multiple elemental lines may be activated. This function is
used to calculate the ratio of the first line’s cross section (cs) to
the summed cross section from all the lines.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><dl class="first docutils">
<dt><strong>elemental_line</strong> <span class="classifier-delimiter">:</span> <span class="classifier">str</span></dt>
<dd><p class="first last">e.g., ‘Mg_K’, refers to the K lines of Magnesium</p>
</dd>
<dt><strong>energy</strong> <span class="classifier-delimiter">:</span> <span class="classifier">float</span></dt>
<dd><p class="first last">incident energy in keV</p>
</dd>
</dl>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><dl class="first last docutils">
<dt><strong>float :</strong></dt>
<dd><p class="first last">calculated ratio</p>
</dd>
</dl>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="skbeam.core.fitting.xrf_model.linear_spectrum_fitting">
<code class="descclassname">skbeam.core.fitting.xrf_model.</code><code class="descname">linear_spectrum_fitting</code><span class="sig-paren">(</span><em>x</em>, <em>y</em>, <em>params</em>, <em>elemental_lines=None</em>, <em>weights=None</em><span class="sig-paren">)</span><a class="headerlink" href="#skbeam.core.fitting.xrf_model.linear_spectrum_fitting" title="Permalink to this definition">¶</a></dt>
<dd><p>Fit a spectrum to a linear model.</p>
<p>This is a convenience function that wraps up construct_linear_model
and nnls_fit.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><dl class="first docutils">
<dt><strong>x</strong> <span class="classifier-delimiter">:</span> <span class="classifier">array</span></dt>
<dd><p class="first last">channel array</p>
</dd>
<dt><strong>y</strong> <span class="classifier-delimiter">:</span> <span class="classifier">array</span></dt>
<dd><p class="first last">spectrum intensity</p>
</dd>
<dt><strong>param</strong> <span class="classifier-delimiter">:</span> <span class="classifier">dict</span></dt>
<dd><p class="first last">fitting parameters</p>
</dd>
<dt><strong>elemental_lines</strong> <span class="classifier-delimiter">:</span> <span class="classifier">list, optional</span></dt>
<dd><p class="first last">e.g., [‘Na_K’, Mg_K’, ‘Pt_M’] refers to the
K lines of Sodium, the K lines of Magnesium, and the M
lines of Platinum. If elemental_lines is set as None,
all the possible lines activated at given energy will be used.</p>
</dd>
<dt><strong>weights</strong> <span class="classifier-delimiter">:</span> <span class="classifier">array, optional</span></dt>
<dd><p class="first last">for weighted nnls fitting. Setting weights as None means fitting
without weights.</p>
</dd>
</dl>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><dl class="first last docutils">
<dt><strong>x_energy</strong> <span class="classifier-delimiter">:</span> <span class="classifier">array</span></dt>
<dd><p class="first last">x axis with unit in energy</p>
</dd>
<dt><strong>result_dict</strong> <span class="classifier-delimiter">:</span> <span class="classifier">dict</span></dt>
<dd><p class="first last">Fitting results</p>
</dd>
<dt><strong>area_dict</strong> <span class="classifier-delimiter">:</span> <span class="classifier">dict</span></dt>
<dd><p class="first last">the area of the first main peak, such as Ka1, of a given element</p>
</dd>
</dl>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="skbeam.core.fitting.xrf_model.nnls_fit">
<code class="descclassname">skbeam.core.fitting.xrf_model.</code><code class="descname">nnls_fit</code><span class="sig-paren">(</span><em>spectrum</em>, <em>expected_matrix</em>, <em>weights=None</em><span class="sig-paren">)</span><a class="headerlink" href="#skbeam.core.fitting.xrf_model.nnls_fit" title="Permalink to this definition">¶</a></dt>
<dd><p>Non-negative least squares fitting.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><dl class="first docutils">
<dt><strong>spectrum</strong> <span class="classifier-delimiter">:</span> <span class="classifier">array</span></dt>
<dd><p class="first last">spectrum of experiment data</p>
</dd>
<dt><strong>expected_matrix</strong> <span class="classifier-delimiter">:</span> <span class="classifier">array</span></dt>
<dd><p class="first last">2D matrix of activated element spectrum</p>
</dd>
<dt><strong>weights</strong> <span class="classifier-delimiter">:</span> <span class="classifier">array, optional</span></dt>
<dd><p class="first last">for weighted nnls fitting. Setting weights as None means fitting
without weights.</p>
</dd>
</dl>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><dl class="first last docutils">
<dt><strong>results</strong> <span class="classifier-delimiter">:</span> <span class="classifier">array</span></dt>
<dd><p class="first last">weights of different element</p>
</dd>
<dt><strong>residue</strong> <span class="classifier-delimiter">:</span> <span class="classifier">float</span></dt>
<dd><p class="first last">error</p>
</dd>
<dt><strong>.. note:: nnls is chosen as amplitude of each element should not be negative.</strong></dt>
<dd></dd>
</dl>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="skbeam.core.fitting.xrf_model.register_strategy">
<code class="descclassname">skbeam.core.fitting.xrf_model.</code><code class="descname">register_strategy</code><span class="sig-paren">(</span><em>key</em>, <em>strategy</em>, <em>overwrite=True</em><span class="sig-paren">)</span><a class="headerlink" href="#skbeam.core.fitting.xrf_model.register_strategy" title="Permalink to this definition">¶</a></dt>
<dd><p>Register new strategy.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><dl class="first last docutils">
<dt><strong>key</strong> <span class="classifier-delimiter">:</span> <span class="classifier">str</span></dt>
<dd><p class="first last">strategy name</p>
</dd>
<dt><strong>strategy</strong> <span class="classifier-delimiter">:</span> <span class="classifier">dict</span></dt>
<dd><p class="first last">bound for every parameter</p>
</dd>
</dl>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="skbeam.core.fitting.xrf_model.set_parameter_bound">
<code class="descclassname">skbeam.core.fitting.xrf_model.</code><code class="descname">set_parameter_bound</code><span class="sig-paren">(</span><em>param</em>, <em>bound_option</em>, <em>extra_config=None</em><span class="sig-paren">)</span><a class="headerlink" href="#skbeam.core.fitting.xrf_model.set_parameter_bound" title="Permalink to this definition">¶</a></dt>
<dd><p>Update the default value of bounds.</p>
<div class="admonition warning">
<p class="first admonition-title">Warning</p>
<p class="last">This function mutates the input values.</p>
</div>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><dl class="first last docutils">
<dt><strong>param</strong> <span class="classifier-delimiter">:</span> <span class="classifier">dict</span></dt>
<dd><p class="first last">saving all the fitting values and their bounds</p>
</dd>
<dt><strong>bound_option</strong> <span class="classifier-delimiter">:</span> <span class="classifier">str</span></dt>
<dd><p class="first last">define bound type</p>
</dd>
<dt><strong>extra_config</strong> <span class="classifier-delimiter">:</span> <span class="classifier">dict</span></dt>
<dd><p class="first last">strategy-specific configuration</p>
</dd>
</dl>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="skbeam.core.fitting.xrf_model.sum_area">
<code class="descclassname">skbeam.core.fitting.xrf_model.</code><code class="descname">sum_area</code><span class="sig-paren">(</span><em>elemental_line</em>, <em>result_val</em><span class="sig-paren">)</span><a class="headerlink" href="#skbeam.core.fitting.xrf_model.sum_area" title="Permalink to this definition">¶</a></dt>
<dd><p>Return the total area for given element.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><dl class="first docutils">
<dt><strong>elemental_line</strong> <span class="classifier-delimiter">:</span> <span class="classifier">str</span></dt>
<dd><p class="first last">name of a given element line, such as Na_K</p>
</dd>
<dt><strong>result_val</strong> <span class="classifier-delimiter">:</span> <span class="classifier">obj</span></dt>
<dd><p class="first last">result obj from lmfit to save all the fitting results</p>
</dd>
</dl>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><dl class="first last docutils">
<dt><strong>sumv</strong> <span class="classifier-delimiter">:</span> <span class="classifier">float</span></dt>
<dd><p class="first last">the total area</p>
</dd>
</dl>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="skbeam.core.fitting.xrf_model.trim">
<code class="descclassname">skbeam.core.fitting.xrf_model.</code><code class="descname">trim</code><span class="sig-paren">(</span><em>x</em>, <em>y</em>, <em>low</em>, <em>high</em><span class="sig-paren">)</span><a class="headerlink" href="#skbeam.core.fitting.xrf_model.trim" title="Permalink to this definition">¶</a></dt>
<dd><p>Mask two arrays applying bounds to the first array.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><dl class="first docutils">
<dt><strong>x</strong> <span class="classifier-delimiter">:</span> <span class="classifier">array</span></dt>
<dd><p class="first last">independent variable</p>
</dd>
<dt><strong>y</strong> <span class="classifier-delimiter">:</span> <span class="classifier">array</span></dt>
<dd><p class="first last">dependent variable</p>
</dd>
<dt><strong>low</strong> <span class="classifier-delimiter">:</span> <span class="classifier">float</span></dt>
<dd><p class="first last">low bound</p>
</dd>
<dt><strong>high</strong> <span class="classifier-delimiter">:</span> <span class="classifier">float</span></dt>
<dd><p class="first last">high bound</p>
</dd>
</dl>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><dl class="first last docutils">
<dt><strong>array :</strong></dt>
<dd><p class="first last">x with new range</p>
</dd>
<dt><strong>array :</strong></dt>
<dd><p class="first last">y with new range</p>
</dd>
</dl>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="skbeam.core.fitting.xrf_model.update_parameter_dict">
<code class="descclassname">skbeam.core.fitting.xrf_model.</code><code class="descname">update_parameter_dict</code><span class="sig-paren">(</span><em>param</em>, <em>fit_results</em><span class="sig-paren">)</span><a class="headerlink" href="#skbeam.core.fitting.xrf_model.update_parameter_dict" title="Permalink to this definition">¶</a></dt>
<dd><p>Update fitting parameters dictionary according to given fitting results,
usually obtained from previous run.</p>
<div class="admonition warning">
<p class="first admonition-title">Warning</p>
<p class="last">This function mutates param.</p>
</div>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><dl class="first last docutils">
<dt><strong>param</strong> <span class="classifier-delimiter">:</span> <span class="classifier">dict</span></dt>
<dd><p class="first last">saving all the fitting values and their bounds</p>
</dd>
<dt><strong>fit_results</strong> <span class="classifier-delimiter">:</span> <span class="classifier">object</span></dt>
<dd><p class="first last">ModelFit object from lmfit</p>
</dd>
</dl>
</td>
</tr>
</tbody>
</table>
</dd></dl>

</div>


          </div>
          
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
<h1 class="logo"><a href="../../../../index.html">scikit-beam</a></h1>








<h3>Navigation</h3>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../../../install.html">Installation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../getting_started.html">Getting Started with Scikit-beam</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../installation.html">Installing scikit-beam</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../installation.html#updating-your-installation">Updating Your Installation</a></li>
</ul>
<ul class="current">
<li class="toctree-l1 current"><a class="reference internal" href="../../index.html">Complete Reference (API)</a><ul class="current">
<li class="toctree-l2 current"><a class="reference internal" href="../../index.html#core">Core</a><ul class="current">
<li class="toctree-l3 current"><a class="reference internal" href="../index.html">Core API</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../io/index.html">IO API</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../core.html"><code class="docutils literal notranslate"><span class="pre">core</span></code> subpackge</a></li>
<li class="toctree-l3"><a class="reference internal" href="../mask.html"><code class="docutils literal notranslate"><span class="pre">core.mask</span></code> Module</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../index.html#domain-name-spaces">Domain name spaces</a></li>
</ul>
</li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../../../development/workflow/get_devel_version.html">Try the development version</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../development/workflow/development_workflow.html">How to make a code contribution</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../../../overview.html">Project organization</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../development/workflow/development_workflow.html">How to make a code contribution</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../development/codeguide.html">Coding Guidelines</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../development/docguide.html">Writing Documentation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../development/testguide.html">Testing Guidelines</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../development/scripts.html">Writing Command-Line Scripts</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../development/building.html">Building Scikit-beam and its Subpackages</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../development/ccython.html">C or Cython Extensions</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../development/releasing.html">Release Procedures</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../development/workflow/maintainer_workflow.html">Workflow for Maintainers</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../development/affiliated-packages.html">How to create and maintain an Skbeam affiliated package</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../development/vision.html">Vision for a Common Python Package for x-ray, electron and neutrons</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../dev_guide/index.html">Development Guide</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../api_changes.html">API Changes</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../python_versions.html">Supported versions of Python</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../warnings.html">Python warnings system</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../../../whatsnew/index.html">Major Release History</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../whats_new.html">What’s new</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../known_issues.html">Known Issues</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../examples/index.html">Example gallery</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../introduction.html">Introduction to scikit-beam</a></li>
</ul>

<div class="relations">
<h3>Related Topics</h3>
<ul>
  <li><a href="../../../../index.html">Documentation overview</a><ul>
  <li><a href="../../index.html">Complete Reference (API)</a><ul>
  <li><a href="../index.html">Core API</a><ul>
  <li><a href="index.html">Fitting API</a><ul>
      <li>Previous: <a href="background.html" title="previous chapter"><code class="docutils literal notranslate"><span class="pre">funcs</span></code> Module</a></li>
      <li>Next: <a href="lineshapes.html" title="next chapter"><code class="docutils literal notranslate"><span class="pre">background</span></code> Module</a></li>
  </ul></li>
  </ul></li>
  </ul></li>
  </ul></li>
</ul>
</div>
<div id="searchbox" style="display: none" role="search">
  <h3>Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="../../../../search.html" method="get">
      <input type="text" name="q" />
      <input type="submit" value="Go" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
    </div>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="footer">
      &copy;2014-2015 Brookhaven National Lab.
      
      |
      Powered by <a href="http://sphinx-doc.org/">Sphinx 1.7.9</a>
      &amp; <a href="https://github.com/bitprophet/alabaster">Alabaster 0.7.11</a>
      
      |
      <a href="../../../../_sources/resource/api/core/fitting/funcs.rst.txt"
          rel="nofollow">Page source</a>
    </div>

    

    
  </body>
</html>